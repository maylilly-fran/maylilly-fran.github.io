<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ã€éˆ´è˜­ã®å‰£ã€‘ãƒ•ãƒ©ãƒ³ãªãƒ„ãƒ¼ãƒ«</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/tarot.css">
</head>

<body>
    <div class="controls">
      <button class="reloadBtn" onclick="reloadPage()">ğŸ”„</button>
      <button class="reloadBtn" onclick="goToNextPage('./',false)">ğŸ </button>
    </div>

    <div id="table-container"></div>
    <button id="backToTopBtn">â‡ª TOP</button>

    <script>
        fetch('./data/tarot.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('table-container');
                data.forEach(item => {
                    const row = document.createElement('div');
                    row.className = 'table-row';

                    const imageCell = document.createElement('div');
                    imageCell.className = 'image-cell';
                    imageCell.innerHTML = `<img src="${item.image}" alt="ç”»åƒ">`;

                    const commentCell = document.createElement('div');
                    commentCell.className = 'comment-cell';
                    commentCell.innerHTML = `
            <div class="comment-title">${item.title}</div>
            <div class="comment-detail"><p class="effect">åŠ¹æœ</p>${item.comment1}</div>
            <div class="comment-detail"><p class="level">Lv.60</p>${item.comment2}</div>
            <div class="comment-detail2"><p class="get">å…¥æ‰‹æ–¹æ³•</p>${item.comment3}</div>
          `;
                    row.appendChild(imageCell);
                    row.appendChild(commentCell);
                    container.appendChild(row);
                });
            })
            .catch(error => {
                console.error('èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('table-container').innerText = 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
            });

        function reloadPage() {
            location.reload();
        }

        function goToNextPage(link) {
            location.href = `${link}`;
        }

        const btn = document.getElementById('backToTopBtn');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                btn.classList.add('show');
            } else {
                btn.classList.remove('show');
            }
        });

        btn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>

</html>